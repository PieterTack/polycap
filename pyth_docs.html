<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>polycap: Python Docs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">polycap<span id="projectnumber">&#160;1.2</span>
   </div>
   <div id="projectbrief">Calculate X-ray transmission through polycapillaries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Python Docs </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following instructions assume that all module attributes have been loaded:</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> polycap <span class="keyword">import</span> *</div>
</div><!-- fragment --><h1><a class="anchor" id="Profile"></a>
Profile</h1>
<p>Class containing information about a polycapillary profile shape.</p>
<p>Create a new <code>Profile</code> instance for a given profile type with supplied polycapillary properties.</p>
<p>Syntax: </p><div class="fragment"><div class="line">profile = Profile(polycap_profile_type type, double length, double rad_ext_upstream, double rad_ext_downstream, double rad_int_upstream, double rad_int_downstream, double focal_dist_upstream, double focal_dist_downstream[, bool ignore=<span class="keyword">False</span>])</div>
</div><!-- fragment --><ul>
<li><b>type:</b> an integer or <a class="el" href="pyth_docs.html#profiletype">Profile type</a> that indicates the profile type</li>
<li><b>length:</b> the polycapillary length, as measured along the central axis [cm]</li>
<li><b>rad_ext_upstream:</b> external upstream polycapillary radius (photons stream from upstream to downstream) [cm]. This radius represents the radius of a circle circumscribing the hexagonal optic area.</li>
<li><b>rad_ext_downstream:</b> external downstream polycapillary radius (photons stream from upstream to downstream) [cm]. This radius represents the radius of a circle circumscribing the hexagonal optic area.</li>
<li><b>rad_int_upstream:</b> internal upstream capillary radius (photons stream from upstream to downstream) [cm]</li>
<li><b>rad_int_downstream:</b> internal downstream capillary radius (photons stream from upstream to downstream) [cm]</li>
<li><b>focal_dist_upstream:</b> focal distance upstream of the polycapillary optic (photons stream from upstream to downstream) [cm]</li>
<li><b>focal_dist_downstream:</b> focal distance downstream of the polycapillary optic (photons stream from upstream to downstream) [cm]</li>
<li><b>ignore:</b> [OPTIONAL] if set to True, a <code>None</code> Profile will be generated. Default is False.</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#Profile">Profile</a>, or raises an exception if an error occurred.</li>
</ul>
<h2><a class="anchor" id="profiletype"></a>
Profile type</h2>
<p>Various optic shapes are allowed, including user-defined shapes. Three general external shapes are supported for straightforward external shape definition. In each case, the single capillary shape is assumed conical around the central capillary axis:</p><ul>
<li><b>CONICAL:</b> the external profile shape is a straight line between the polycapillary entrance and exit radii.</li>
<li><b>PARABOLOIDAL:</b> a third degree polynomial is fit through the polycapillary entrance and exit radii, as well as the linear extrapolation on each side towards the focal distances.</li>
<li><b>ELLIPSOIDAL:</b> an ellipse is described where the polycapillary side with largest radius has a horizontal tangent, whereas the tangent at the shortest radius side is directed towards the corresponding polycapillary focal distance.</li>
</ul>
<h2><a class="anchor" id="profilenewarrays"></a>
new_from_arrays</h2>
<p>Define a profile shape using user defined arrays.</p>
<p>Syntax: </p><div class="fragment"><div class="line">Profile.new_from_arrays(object ext, object cap, object z)</div>
</div><!-- fragment --><ul>
<li><b>ext:</b> a double array containing the polycapillary exterior profile shape radii [cm]</li>
<li><b>cap:</b> a double array containing the polycapillary central capillary profile shape radii [cm]</li>
<li><b>z:</b> a double array containing the polycapillary length profile running from 0 to polycapillary length [cm]</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#Profile">Profile</a>, or raises an exception if an error occurred.</li>
</ul>
<h2><a class="anchor" id="extget"></a>
get_ext</h2>
<p>Get exterior profile shape from a <code>Profile</code> class.</p>
<p>Syntax: </p><div class="fragment"><div class="line">ext = Profile.get_ext()</div>
</div><!-- fragment --><ul>
<li><b>returns:</b> a double array containing the polycapillary exterior profile shape radii [cm]</li>
</ul>
<h2><a class="anchor" id="capget"></a>
get_cap</h2>
<p>Get central capillary profile shape from a <code>Profile</code> class.</p>
<p>Syntax: </p><div class="fragment"><div class="line">cap = Profile.get_cap()</div>
</div><!-- fragment --><ul>
<li><b>returns:</b> a double array containing the polycapillary central capillary profile shape radii [cm]</li>
</ul>
<h2><a class="anchor" id="zget"></a>
get_z</h2>
<p>Get length profile from a <code>Profile</code> class.</p>
<p>Syntax: </p><div class="fragment"><div class="line">z = Profile.get_z()</div>
</div><!-- fragment --><ul>
<li><b>returns:</b> a double array containing the polycapillary length profile running from 0 to polycapillary length [cm]</li>
</ul>
<h1><a class="anchor" id="rng"></a>
Rng</h1>
<p>Class containing a random number generator</p>
<p>Get a new <code>Rng</code> instance with seed optionally provided by caller:</p>
<p>Syntax: </p><div class="fragment"><div class="line">rng = Rng([unsigned int seed=<span class="keywordtype">None</span>])</div>
</div><!-- fragment --><ul>
<li><b>seed:</b> [OPTIONAL] a seed provided by the caller, if not provided one is generated for the user.</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#rng">Rng</a></li>
</ul>
<h1><a class="anchor" id="Description"></a>
Description</h1>
<p>Class containing information about a polycapillary description such as shape and composition</p>
<p>Create a new <code>Description</code> instance by providing all its properties:</p>
<p>Syntax: </p><div class="fragment"><div class="line">description = Description(Profile profile, double sig_rough, int64_t n_cap, object composition, double density)</div>
</div><!-- fragment --><ul>
<li><b>profile:</b> <a class="el" href="pyth_docs.html#Profile">Profile</a> containing outer polycapillary and single capillary shape coordinates</li>
<li><b>sig_rough:</b> Surface rougness of the capillaries [Angstrom]</li>
<li><b>n_cap:</b> The amount of capillaries in the hexagonally packed polycapillary optic</li>
<li><b>composition:</b> capillary material composition XRayLib dictionary or string</li>
<li><b>density:</b> Density of the capillary matrix [g/cm^{3}]</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#Description">Description</a>, or raises an exception if an error occurred.</li>
</ul>
<h1><a class="anchor" id="Source"></a>
Source</h1>
<p>Class containing information on the source from which photons can be (randomly) selected</p>
<p>Create a new <code>Source</code> instance by providing all its properties:</p>
<p>Syntax: </p><div class="fragment"><div class="line">source = Source(Description description, double d_source, double src_x, double src_y, double src_sigx, double src_sigy, double src_shiftx, double src_shifty, object energies)</div>
</div><!-- fragment --><ul>
<li><b>description:</b> a <a class="el" href="pyth_docs.html#Description">Description</a> class</li>
<li><b>d_source:</b> the distance between the source and polycapillary optic entrance window along the central axis [cm]</li>
<li><b>src_x:</b> the source radius along the X (horizontal) direction [cm]</li>
<li><b>src_y:</b> the source radius along the y (vertical) direction [cm]</li>
<li><b>src_sigx:</b> the maximal divergence of photons along the X (horizontal) direction [rad]. Negative values in src_sigx or src_sigy represent homogeneous polycapillary optic illumination.</li>
<li><b>src_sigy:</b> the maximal divergence of photons along the Y (vertical) direction [rad]. Negative values in src_sigx or src_sigy represent homogeneous polycapillary optic illumination.</li>
<li><b>src_shiftx:</b> lateral shift of the source centre along the X (horizontal) direction with respect to the polycapillary optic central axis [cm]</li>
<li><b>src_shifty:</b> lateral shift of the source centre along the Y (vertical) direction with respect to the polycapillary optic central axis [cm]</li>
<li><b>hor_pol:</b> the polarisation factor of the simulated source (-1 &lt;= hor_pol &lt;= 1)</li>
<li><b>energies:</b> an array containing the discrete energies of which the source will emit photons</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#Source">Source</a>, or raises an exception if an error occurred.</li>
</ul>
<h2><a class="anchor" id="src_phot"></a>
get_photon</h2>
<p>Create a new random <code>Photon</code> emitted by <a class="el" href="pyth_docs.html#Source">Source</a>.</p>
<p>Syntax: </p><div class="fragment"><div class="line">photon = source.get_photon(Rng rng)</div>
</div><!-- fragment --><ul>
<li><b>rng:</b> a <a class="el" href="pyth_docs.html#rng">Rng</a> instance, not None</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#Photon">Photon</a>, or raises an exception if an error occurred.</li>
</ul>
<h2><a class="anchor" id="src_trans"></a>
get_transmission_efficiencies</h2>
<p>Syntax: </p><div class="fragment"><div class="line">eff = source.get_transmission_efficiencies(int max_threads, int n_photons[, bool leak_calc])</div>
</div><!-- fragment --><ul>
<li><b>max_threads:</b> the amount of threads to use. Set to -1 to use the maximum available amount of threads.</li>
<li><b>n_photons:</b> the amount of photons to simulate that reach the polycapillary end</li>
<li><b>leak_calc</b>: [OPTIONAL] True: perform leak calculation; (default) False: do not perform leak calculation</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#TransmissionEfficiencies">TransmissionEfficiencies</a> instance, or raises an exception if an error occurred.</li>
</ul>
<h1><a class="anchor" id="Photon"></a>
Photon</h1>
<p>Class containing information about the simulated photon such as position and direction, energy and transmission weights.</p>
<p>Create a new <code>Photon</code> with its initial position, direction and electric field vector: Syntax: </p><div class="fragment"><div class="line">photon = Photon(Description description, object start_coords, object start_direction, object start_electric_vector, [bool ignore])</div>
</div><!-- fragment --><ul>
<li><b>description:</b> a <a class="el" href="pyth_docs.html#Description">Description</a> class</li>
<li><b>start_coords:</b> photon start coordinates array [x,y,z]</li>
<li><b>start_direction:</b> photon start direction array [x,y,z]</li>
<li><b>start_electric_vector:</b> photon start electric field vector array [x,y,z]</li>
<li><b>ignore:</b> [OPTIONAL] if set to True, a <code>None</code> Photon will be generated. Default is False.</li>
<li><b>returns:</b> a new <a class="el" href="pyth_docs.html#Photon">Photon</a>, or raises an exception if an error occurred.</li>
</ul>
<h2><a class="anchor" id="phot_launch"></a>
launch</h2>
<p>Simulate a single photon trajectory for a given <a class="el" href="pyth_docs.html#Description">Description</a>. For each single photon the transmission efficiencies for all energies are calculated.</p>
<p>Syntax: </p><div class="fragment"><div class="line">weight = photon.launch(object energies[, bool leak_calc])</div>
</div><!-- fragment --><ul>
<li><b>energies:</b> a double array containing the discrete energies for which the transmission efficiency will be calculated [keV]</li>
<li><b>leak_calc:</b> True: perform leak calculation; (default) False: do not perform leak calculation</li>
<li><b>returns:</b> weights array that will contain the transmission efficiency values as a function of photon energy</li>
</ul>
<h2><a class="anchor" id="phot_coord"></a>
get_exit_coords</h2>
<p>Retrieve exit coordinates from a <a class="el" href="pyth_docs.html#Photon">Photon</a> class.</p>
<p>Syntax: </p><div class="fragment"><div class="line">coord = photon.get_exit_coords()</div>
</div><!-- fragment --><h2><a class="anchor" id="phot_dir"></a>
get_exit_direction</h2>
<p>Retrieve exit direction from a <a class="el" href="pyth_docs.html#Photon">Photon</a> class.</p>
<p>Syntax: </p><div class="fragment"><div class="line">dir = photon.get_exit_direction()</div>
</div><!-- fragment --><h2><a class="anchor" id="phot_elec"></a>
get_exit_electric_vector</h2>
<p>Retrieve exit electric field vector from a <a class="el" href="pyth_docs.html#Photon">Photon</a> class</p>
<p>Syntax: </p><div class="fragment"><div class="line">vect = Photon.get_exit_electric_vector()</div>
</div><!-- fragment --><h1><a class="anchor" id="TransmissionEfficiencies"></a>
TransmissionEfficiencies</h1>
<p>Class containing all output information such as simulated photon coordinates, direction, energies, weights, etc. This class cannot be instantiated directly, and objects can only be obtained as the output of <a class="el" href="pyth_docs.html#src_trans">get_transmission_efficiencies</a>.</p>
<h2><a class="anchor" id="TE_write"></a>
write_hdf5</h2>
<p>Write <a class="el" href="pyth_docs.html#TransmissionEfficiencies">TransmissionEfficiencies</a> data to a HDF5 file:</p>
<p>Syntax: </p><div class="fragment"><div class="line">eff.write_hdf5(str filename)</div>
</div><!-- fragment --><ul>
<li><b>filename:</b> a HDF5 file new, not None</li>
<li><b>returns:</b> None, or raises an exception if an error occurred.</li>
</ul>
<h2><a class="anchor" id="TE_data"></a>
data</h2>
<p>Extract data from a <a class="el" href="pyth_docs.html#TransmissionEfficiencies">TransmissionEfficiencies</a> instance. Access it as a property, not a method.</p>
<p>Syntax: </p><div class="fragment"><div class="line">data = TransmissionEfficiencies.data</div>
</div><!-- fragment --><ul>
<li><b>returns</b> : tuple of (self.energies_np, self.efficiencies_np) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
